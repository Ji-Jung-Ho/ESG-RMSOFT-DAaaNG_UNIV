<script
  type="text/javascript"
  src="//dapi.kakao.com/v2/maps/sdk.js?appkey=754f3d9e59082cd135b5e3965f8ae1ea"
></script>
<div id="mapwrap">
  <!-- 지도가 표시될 div -->
  <div id="map" style="width: 80%; height: 550px"></div>
  <!-- 지도 위에 표시될 마커 카테고리 -->
  <div class="category">
    <ul>
      <li id="restMenu" onclick="changeMarker('restaurant')">
        <span class="ico_restaurant"></span>
        식당
      </li>
      <li id="cafeMenu" onclick="changeMarker('cafe')">
        <span class="ico_cafe"></span>
        카페
      </li>
      <li id="hospitalMenu" onclick="changeMarker('hospital')">
        <span class="ico_hospital"></span>
        병원
      </li>
      <li id="parkMenu" onclick="changeMarker('park')">
        <span class="ico_park"></span>
        공원
      </li>
    </ul>
  </div>
</div>
<script>
  var mapContainer = document.getElementById('map'), // 지도를 표시할 div
    mapOption = {
      center: new kakao.maps.LatLng(37.498004414546934, 127.02770621963765), // 지도의 중심좌표
      level: 3, // 지도의 확대 레벨
    };

  var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다

  // 식당 마커가 표시될 좌표 배열입니다
  var restaurantPositions = [
    new kakao.maps.LatLng(37.499590490909185, 127.0263723554437),
    new kakao.maps.LatLng(37.499427948430814, 127.02794423197847),
    new kakao.maps.LatLng(37.498553760499505, 127.02882598822454),
    new kakao.maps.LatLng(37.497625593121384, 127.02935713582038),
    new kakao.maps.LatLng(37.49646391248451, 127.02675574250912),
    new kakao.maps.LatLng(37.49629291770947, 127.02587362608637),
    new kakao.maps.LatLng(37.49754540521486, 127.02546694890695),
  ];

  // 카페 마커가 표시될 좌표 배열입니다
  var cafePositions = [
    new kakao.maps.LatLng(37.497535461505684, 127.02948149502778),
    new kakao.maps.LatLng(37.49671536281186, 127.03020491448352),
    new kakao.maps.LatLng(37.496201943633714, 127.02959405469642),
    new kakao.maps.LatLng(37.49640072567703, 127.02726459882308),
    new kakao.maps.LatLng(37.49640098874988, 127.02609983175294),
    new kakao.maps.LatLng(37.49932849491523, 127.02935780247945),
    new kakao.maps.LatLng(37.49996818951873, 127.02943721562295),
  ];

  // 병원 마커가 표시될 좌표 배열입니다
  var hospitalPositions = [
    new kakao.maps.LatLng(37.49966168796031, 127.03007039430118),
    new kakao.maps.LatLng(37.499463762912974, 127.0288828824399),
    new kakao.maps.LatLng(37.49896834100913, 127.02833986892401),
    new kakao.maps.LatLng(37.49893267508434, 127.02673400572665),
    new kakao.maps.LatLng(37.49872543597439, 127.02676785815386),
    new kakao.maps.LatLng(37.49813096097184, 127.02591949495914),
    new kakao.maps.LatLng(37.497680616783086, 127.02518427952202),
  ];

//공원 마커가 표시될 좌표 배열입니다
  var parkPositions = [
      new kakao.maps.LatLng(37.497313, 127.030655),
      new kakao.maps.LatLng(37.498608, 127.021142),
      new kakao.maps.LatLng(37.494173, 127.022869),
      new kakao.maps.LatLng(37.493961, 127.032210),
    ];

  var markerImageSrc = './css_sprites.png';
  (restaurantMarkers = []), // 식당 마커 객체를 가지고 있을 배열입니다
    (cafeMarkers = []), // 카페 마커 객체를 가지고 있을 배열입니다
    (hospitalMarkers = []), // 병원 마커 객체를 가지고 있을 배열입니다
    (parkMarkers = []);

  createrestaurantMarkers(); // 식당 마커를 생성하고 식당 마커 배열에 추가합니다
  createcafeMarkers(); // 카페 마커를 생성하고 카페 마커 배열에 추가합니다
  createhospitalMarkers(); // 병원 마커를 생성하고 병원 마커 배열에 추가합니다
  createparkMarkers();

  changeMarker('restaurant'); // 지도에 식당 마커가 보이도록 설정합니다

  // 마커이미지의 주소와, 크기, 옵션으로 마커 이미지를 생성하여 리턴하는 함수입니다
  function createMarkerImage(src, size, options) {
    var markerImage = new kakao.maps.MarkerImage(src, size, options);
    return markerImage;
  }

  // 좌표와 마커이미지를 받아 마커를 생성하여 리턴하는 함수입니다
  function createMarker(position, image) {
    var marker = new kakao.maps.Marker({
      position: position,
      image: image,
    });

    return marker;
  }

  // 식당 마커를 생성하고 식당 마커 배열에 추가하는 함수입니다
  function createrestaurantMarkers() {
    for (var i = 0; i < restaurantPositions.length; i++) {
      var imageSize = new kakao.maps.Size(35, 50),
        imageOptions = {
          spriteOrigin: new kakao.maps.Point(7, 50),
          spriteSize: new kakao.maps.Size(100, 100),
        };

      // 마커이미지와 마커를 생성합니다
      var markerImage = createMarkerImage(
          markerImageSrc,
          imageSize,
          imageOptions
        ),
        marker = createMarker(restaurantPositions[i], markerImage);

      // 생성된 마커를 식당 마커 배열에 추가합니다
      restaurantMarkers.push(marker);
    }
  }

  // 식당 마커들의 지도 표시 여부를 설정하는 함수입니다
  function setrestaurantMarkers(map) {
    for (var i = 0; i < restaurantMarkers.length; i++) {
      restaurantMarkers[i].setMap(map);
    }
  }

  // 카페 마커를 생성하고 카페 마커 배열에 추가하는 함수입니다
  function createcafeMarkers() {
    for (var i = 0; i < cafePositions.length; i++) {
      var imageSize = new kakao.maps.Size(35, 50),
        imageOptions = {
          spriteOrigin: new kakao.maps.Point(7, 0),
          spriteSize: new kakao.maps.Size(100, 100),
        };

      // 마커이미지와 마커를 생성합니다
      var markerImage = createMarkerImage(
          markerImageSrc,
          imageSize,
          imageOptions
        ),
        marker = createMarker(cafePositions[i], markerImage);

      // 생성된 마커를 카페 마커 배열에 추가합니다
      cafeMarkers.push(marker);
    }
  }

  // 카페 마커들의 지도 표시 여부를 설정하는 함수입니다
  function setcafeMarkers(map) {
    for (var i = 0; i < cafeMarkers.length; i++) {
      cafeMarkers[i].setMap(map);
    }
  }

  // 병원 마커를 생성하고 병원 마커 배열에 추가하는 함수입니다
  function createhospitalMarkers() {
    for (var i = 0; i < hospitalPositions.length; i++) {
      var imageSize = new kakao.maps.Size(50, 50),
        imageOptions = {
          spriteOrigin: new kakao.maps.Point(45, 0),
          spriteSize: new kakao.maps.Size(100, 100),
        };

      // 마커이미지와 마커를 생성합니다
      var markerImage = createMarkerImage(
          markerImageSrc,
          imageSize,
          imageOptions
        ),
        marker = createMarker(hospitalPositions[i], markerImage);

      // 생성된 마커를 병원 마커 배열에 추가합니다
      hospitalMarkers.push(marker);
    }
  }

  // 병원 마커들의 지도 표시 여부를 설정하는 함수입니다
  function sethospitalMarkers(map) {
    for (var i = 0; i < hospitalMarkers.length; i++) {
      hospitalMarkers[i].setMap(map);
    }
  }

  // 공원 마커를 생성하고 공원 마커 배열에 추가하는 함수입니다
    function createparkMarkers() {
      for (var i = 0; i < parkPositions.length; i++) {
        var imageSize = new kakao.maps.Size(50, 50),
          imageOptions = {
            spriteOrigin: new kakao.maps.Point(50, 50),
            spriteSize: new kakao.maps.Size(100, 100),
          };

        // 마커이미지와 마커를 생성합니다
        var markerImage = createMarkerImage(
          markerImageSrc,
          imageSize,
          imageOptions
        ),
          marker = createMarker(parkPositions[i], markerImage);

        // 생성된 마커를 공원 마커 배열에 추가합니다
        parkMarkers.push(marker);
      }
    }

    // 공원 마커들의 지도 표시 여부를 설정하는 함수입니다
    function setparkMarkers(map) {
      for (var i = 0; i < parkMarkers.length; i++) {
        parkMarkers[i].setMap(map);
      }
    }

  // 카테고리를 클릭했을 때 type에 따라 카테고리의 스타일과 지도에 표시되는 마커를 변경합니다
  function changeMarker(type) {
    var restMenu = document.getElementById('restMenu');
    var cafeMenu = document.getElementById('cafeMenu');
    var hospitalMenu = document.getElementById('hospitalMenu');
    var parkMenu = document.getElementById('parkMenu');

    // 식당 카테고리가 클릭됐을 때
    if (type === 'restaurant') {
      // 식당 카테고리를 선택된 스타일로 변경하고
      restMenu.className = 'menu_selected';

      // 카페과 병원 카테고리는 선택되지 않은 스타일로 바꿉니다
      cafeMenu.className = '';
      hospitalMenu.className = '';
      parkMenu.className = '';

      // 식당 마커들만 지도에 표시하도록 설정합니다
      setrestaurantMarkers(map);
      setcafeMarkers(null);
      sethospitalMarkers(null);
      setparkMarkers(null);
    } else if (type === 'cafe') {
      // 카페 카테고리가 클릭됐을 때

      // 카페 카테고리를 선택된 스타일로 변경하고
      restMenu.className = '';
      cafeMenu.className = 'menu_selected';
      hospitalMenu.className = '';
      parkMenu.className = '';

      // 카페 마커들만 지도에 표시하도록 설정합니다
      setrestaurantMarkers(null);
      setcafeMarkers(map);
      sethospitalMarkers(null);
      setparkMarkers(null);
    } else if (type === 'hospital') {
      // 병원 카테고리가 클릭됐을 때

      // 병원 카테고리를 선택된 스타일로 변경하고
      restMenu.className = '';
      cafeMenu.className = '';
      hospitalMenu.className = 'menu_selected';
      parkMenu.className = '';

      // 병원 마커들만 지도에 표시하도록 설정합니다
      setrestaurantMarkers(null);
      setcafeMarkers(null);
      sethospitalMarkers(map);
      setparkMarkers(null);
    } else if (type === 'park') {
      // 공원 카테고리가 클릭됐을 때

      // 공원 카테고리를 선택된 스타일로 변경하고
      restMenu.className = '';
      cafeMenu.className = '';
      hospitalMenu.className = '';
      parkMenu.className = 'menu_selected';

      // 공원 마커들만 지도에 표시하도록 설정합니다
      setrestaurantMarkers(null);
      setcafeMarkers(null);
      sethospitalMarkers(null);
      setparkMarkers(map);
    }
  }
</script>

<style>
  #mapwrap {
    position: relative;
    overflow: hidden;
  }
  .category,
  .category * {
    margin: 0;
    padding: 0;
    color: #000;
  }
  .category {
    position: absolute;
    overflow: hidden;
    top: 10px;
    left: 10px;
    width: 200px;
    height: 50px;
    z-index: 10;
    border: 1px solid black;
    font-family: 'Malgun Gothic', '맑은 고딕', sans-serif;
    font-size: 11px;
    text-align: center;
    background-color: #fff;
  }
  .category .menu_selected {
    background: #ff5f4a;
    color: #fff;
    border-left: 1px solid #915b2f;
    border-right: 1px solid #915b2f;
    margin: 0 -1px;
  }
  .category li {
    list-style: none;
    float: left;
    width: 50px;
    height: 45px;
    padding-top: 5px;
    cursor: pointer;
  }

  .category .ico_restaurant {
    display: block;
    margin: 0 auto 2px;
    width: 28px;
    height: 28px;
    background-image: url('./rest.png');
    background-size: cover;
    background-position: no-repeat -13px -10px;
  }
  .category .ico_cafe {
    display: block;
    margin: 0 auto 2px;
    width: 28px;
    height: 28px;
    background-image: url('./cafe.png');
    background-size: cover;
    background-position: no-repeat -13px -10px;
  }
  .category .ico_hospital {
    display: block;
    margin: 0 auto 2px;
    width: 28px;
    height: 28px;
    background-image: url('./hospital.png');
    background-size: cover;
    background-position: no-repeat -13px -10px;
  }
  .category .ico_park {
    display: block;
    margin: 0 auto 2px;
    width: 28px;
    height: 28px;
    background-image: url('./park.png');
    background-size: cover;
    background-position: no-repeat -13px -10px;
  }
</style>
